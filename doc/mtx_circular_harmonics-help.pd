#N canvas 549 113 921 503 10;
#X text 620 234 for m>=0;
#X text 619 250 for m< 0;
#X text 288 118 [mtx_circular_harmonics] requires a numerical creation argument <nmax> specifyiing the maximum order 0<=n<=nmax.;
#X text 74 54 [mtx_circular_harmonics] circular harmonics evaluated at a set of points given in phi coordinates.;
#X text 284 160 for an L points 2xL input matrix \, [mtx_spherical_harmonics] evaluates the (2*nmax+2) circular harmonics at L points and delivers an Lx(2*nmax+2) output matrix.;
#X text 167 235 PHI_m(phi) = sqrt((2-delta_m) / (2*pi)) * cos(m*phi);
#X text 126 284 The order of the harmonics in the output columns is specified by the linear index k=nmax+m+1.;
#N canvas 0 0 450 300 (subpatch) 0;
#X array circularharmonic1 100 float 1;
#A 0 0 0.189454 0.372046 0.541162 0.690677 0.815174 0.910146 0.972151 0.998945 0.989555 0.944323 0.864887 0.754124 0.616046 0.455655 0.278759 0.0917663 -0.0985502 -0.285297 -0.461711 -0.6214 -0.758582 -0.868288 -0.946544 -0.990515 -0.998608 -0.970532 -0.907302 -0.811208 -0.685732 -0.535419 -0.365712 -0.182758 0.00681508 0.196141 0.378363 0.54688 0.695589 0.819103 0.912948 0.973726 0.999234 0.98855 0.942059 0.861447 0.749631 0.610664 0.449578 0.272208 0.0849782 -0.10533 -0.291822 -0.467745 -0.626725 -0.763005 -0.871649 -0.94872 -0.991428 -0.998226 -0.968867 -0.904415 -0.807205 -0.680756 -0.52965 -0.35936 -0.176054 0.0136298 0.202819 0.384662 0.552572 0.700469 0.822993 0.915708 0.975255 0.999478 0.987499 0.939751 0.857966 0.745104 0.605254 0.44348 0.265644 0.0781865 -0.112104 -0.298334 -0.473757 -0.632021 -0.767393 -0.874968 -0.950852 -0.992295 -0.997797 -0.967157 -0.901486 -0.803163 -0.675749 -0.523858 -0.352992 -0.169342 0.0204425;
#X coords 0 1 99 -1 200 50 1;
#X restore 720 14 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array circularharmonic2 100 float 1;
#A 0 0 0.126729 0.251415 0.372046 0.486678 0.593462 0.690677 0.776754 0.850306 0.910146 0.95531 0.98507 0.998945 0.996711 0.978406 0.944323 0.895013 0.831271 0.754124 0.664817 0.56479 0.455655 0.339172 0.217221 0.0917664 -0.0351679 -0.161535 -0.285297 -0.404459 -0.517099 -0.6214 -0.715681 -0.798422 -0.868288 -0.924153 -0.965115 -0.990515 -0.999942 -0.993245 -0.970532 -0.932168 -0.878774 -0.811208 -0.730562 -0.638135 -0.535419 -0.424068 -0.305879 -0.182758 -0.0566901 0.0702923 0.196141 0.318827 0.436372 0.54688 0.64857 0.739801 0.819103 0.885196 0.937016 0.973726 0.994734 0.999702 0.98855 0.961457 0.91886 0.861446 0.790142 0.706096 0.610664 0.505385 0.391957 0.272208 0.148069 0.0215437 -0.105329 -0.230505 -0.351962 -0.467745 -0.575984 -0.674937 -0.763005 -0.83877 -0.90101 -0.94872 -0.981132 -0.997723 -0.998226 -0.982632 -0.951193 -0.904415 -0.843054 -0.768098 -0.680756 -0.582437 -0.474727 -0.359361 -0.238199 -0.113198 0.0136289;
#X coords 0 1 99 -1 200 50 1;
#X restore 718 80 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array circularharmonic3 100 float 1;
#A 0 0 0.0634926 0.126729 0.189454 0.251415 0.31236 0.372046 0.43023 0.486678 0.541162 0.593462 0.643367 0.690677 0.735199 0.776754 0.815174 0.850306 0.882005 0.910146 0.934614 0.95531 0.972151 0.98507 0.994013 0.998945 0.999845 0.996711 0.989555 0.978406 0.963308 0.944323 0.921528 0.895013 0.864887 0.831271 0.7943 0.754124 0.710905 0.664817 0.616047 0.56479 0.511254 0.455655 0.398217 0.339172 0.278759 0.217221 0.154806 0.0917664 0.0283565 -0.0351679 -0.0985502 -0.161535 -0.223868 -0.285297 -0.345575 -0.404459 -0.461711 -0.517099 -0.5704 -0.6214 -0.669892 -0.715681 -0.758582 -0.798422 -0.83504 -0.868288 -0.898032 -0.924153 -0.946544 -0.965115 -0.979792 -0.990515 -0.99724 -0.999942 -0.998608 -0.993245 -0.983873 -0.970532 -0.953274 -0.932168 -0.907302 -0.878774 -0.846699 -0.811208 -0.772444 -0.730562 -0.685732 -0.638135 -0.587964 -0.535419 -0.480713 -0.424068 -0.365711 -0.305879 -0.244813 -0.182758 -0.119966 -0.0566901 0.0068146;
#X coords 0 1 99 -1 200 50 1;
#X restore 719 146 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array circularharmonic4 100 float 1;
#A 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1;
#X coords 0 1.05 99 -1 200 50 1 0 0;
#X restore 718 217 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array circularharmonic5 100 float 1;
#A 0 1 0.997982 0.991937 0.98189 0.96788 0.949964 0.928214 0.902719 0.873581 0.840918 0.804862 0.765558 0.723164 0.677852 0.629804 0.579215 0.526289 0.471239 0.414288 0.355664 0.295605 0.234354 0.172157 0.109265 0.0459317 -0.0175867 -0.081034 -0.144154 -0.206693 -0.268397 -0.329019 -0.388313 -0.446039 -0.501966 -0.555867 -0.607525 -0.656731 -0.703288 -0.747006 -0.78771 -0.825235 -0.85943 -0.890157 -0.917291 -0.940724 -0.960361 -0.976122 -0.987945 -0.995781 -0.999598 -0.999381 -0.995132 -0.986867 -0.97462 -0.958439 -0.938391 -0.914556 -0.887031 -0.855926 -0.821367 -0.783493 -0.742458 -0.698427 -0.651577 -0.602098 -0.550189 -0.49606 -0.439929 -0.382024 -0.322576 -0.261826 -0.20002 -0.137407 -0.0742395 -0.0107725 0.052738 0.116036 0.178866 0.240973 0.302109 0.362025 0.42048 0.477239 0.532072 0.584757 0.635083 0.682846 0.727854 0.769924 0.808887 0.844587 0.876878 0.90563 0.930728 0.95207 0.96957 0.983158 0.992778 0.998392 0.999977;
#X coords 0 1 99 -1 200 50 1;
#X restore 718 286 graph;
#X obj 75 109 loadbang;
#N canvas 624 434 600 460 send_to_tables 0;
#X obj 21 14 inlet;
#X obj 72 211 mtx;
#X obj 21 36 t a a;
#X obj 21 59 mtx_size;
#X obj 74 105 until;
#X obj 74 82 t f b;
#X msg 117 82 0;
#X obj 101 124 + 1;
#X obj 74 124 f;
#X obj 73 147 t f f;
#X obj 72 249 s;
#X msg 105 168 symbol circularharmonic\$1;
#X obj 72 230 list prepend 0;
#X msg 73 192 column \$1;
#X connect 0 0 2 0;
#X connect 1 0 12 0;
#X connect 2 0 3 0;
#X connect 2 1 1 1;
#X connect 3 1 5 0;
#X connect 4 0 8 0;
#X connect 5 0 4 0;
#X connect 5 1 6 0;
#X connect 6 0 8 1;
#X connect 7 0 8 1;
#X connect 7 0 9 0;
#X connect 8 0 7 0;
#X connect 9 0 13 0;
#X connect 9 1 11 0;
#X connect 11 0 10 1;
#X connect 12 0 10 0;
#X connect 13 0 1 0;
#X restore 75 179 pd send_to_tables;
#X obj 75 133 mtx_linspace 0 6.29 100;
#X obj 159 114 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#N canvas 0 0 450 300 (subpatch) 0;
#X array circularharmonic6 100 float 1;
#A 0 1 0.991937 0.96788 0.928214 0.873581 0.804862 0.723164 0.629804 0.526289 0.414288 0.295605 0.172157 0.0459317 -0.081034 -0.206693 -0.329019 -0.446039 -0.555867 -0.656731 -0.747006 -0.825235 -0.890157 -0.940724 -0.976122 -0.995781 -0.999381 -0.986867 -0.958439 -0.914556 -0.855926 -0.783493 -0.698427 -0.602098 -0.49606 -0.382024 -0.261826 -0.137407 -0.0107725 0.116036 0.240973 0.362025 0.477239 0.584757 0.682846 0.769924 0.844587 0.90563 0.95207 0.983158 0.998392 0.997526 0.980576 0.947813 0.899767 0.837211 0.761155 0.672826 0.573647 0.465218 0.349287 0.227723 0.102488 -0.0244001 -0.150895 -0.274956 -0.394583 -0.507849 -0.612924 -0.708116 -0.791889 -0.862894 -0.919984 -0.962238 -0.988977 -0.999768 -0.994437 -0.973071 -0.936014 -0.883864 -0.817461 -0.737876 -0.646392 -0.544486 -0.433799 -0.316118 -0.193339 -0.0674415 0.0595424 0.185566 0.308598 0.426654 0.537829 0.640332 0.73251 0.812876 0.880133 0.933199 0.971216 0.993572 0.999907;
#X coords 0 1 99 -1 200 50 1;
#X restore 715 356 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array circularharmonic7 100 float 1;
#A 0 1 0.98189 0.928214 0.840918 0.723164 0.579215 0.414288 0.234354 0.0459316 -0.144154 -0.329019 -0.501966 -0.656731 -0.78771 -0.890157 -0.960361 -0.995781 -0.995132 -0.958439 -0.887031 -0.783493 -0.651577 -0.49606 -0.322576 -0.137407 0.0527383 0.240973 0.42048 0.584757 0.727854 0.844587 0.930728 0.983158 0.999977 0.980576 0.925657 0.837211 0.71844 0.573647 0.408076 0.227723 0.0391232 -0.150895 -0.335447 -0.507848 -0.661856 -0.79189 -0.893241 -0.962238 -0.996383 -0.994437 -0.956473 -0.883864 -0.779241 -0.646392 -0.490131 -0.316118 -0.130654 0.0595419 0.247582 0.426654 0.590272 0.73251 0.848216 0.933199 0.98438 0.999907 0.979216 0.923058 0.833465 0.713683 0.568052 0.401845 0.221082 0.0323125 -0.157627 -0.341859 -0.513707 -0.666949 -0.796032 -0.896284 -0.964071 -0.996939 -0.993696 -0.954462 -0.880656 -0.774951 -0.641177 -0.48418 -0.309646 -0.123894 0.0663435 0.254178 0.432808 0.595759 0.737132 0.851805 0.935626 0.985557 0.999791;
#X coords 0 1 99 -1 200 50 1;
#X restore 716 422 graph;
#N canvas 307 302 494 171 META 0;
#X text 12 85 OUTLET_0 matrix;
#X text 12 125 HELP_PATCH_AUTHORS IOhannes m zmÃ¶lnig;
#X text 12 25 LICENSE GPL-2+;
#X text 12 5 KEYWORDS control matrix logic;
#X text 12 65 INLET_0 matrix;
#X text 11 105 AUTHOR Franz Zotter;
#X text 12 45 DESCRIPTION calculate circular harmonics for matrix;
#X restore 585 455 pd META;
#X text 167 251 PHI_m(phi) = 1/sqrt(pi) * sin(|m|*phi);
#X text 399 452 Franz Zotter \, 2009 \, 2023;
#X text 231 317 Default: N2D;
#X obj 75 157 mtx_circular_harmonics 3 SN2D;
#X text 129 219 for -n<=m<=n: (default N2D);
#X obj 76 318 mtx_circular_harmonics 1;
#X obj 52 334 mtx_circular_harmonics 1 N2D;
#X obj 34 350 mtx_circular_harmonics 1 N2D2PI;
#X text 231 332 uses sqrt(2-delta_m)/sqrt(2pi) altogether to normalize;
#X text 231 350 uses sqrt(2-delta_m) \, omitting 1/sqrt(2pi) to normalize;
#X obj 46 366 mtx_circular_harmonics 1 SN2D;
#X text 231 366 uses 1 \, so no nromalization;
#X text 74 388 Typical 2D Ambisonic encoding choice is SN2D;
#X text 75 400 Typical mathematical integral orthonormalization choice: N2D;
#X connect 12 0 14 0;
#X connect 14 0 22 0;
#X connect 15 0 14 0;
#X connect 22 0 13 0;
