#N canvas 316 110 645 562 10;
#X obj 49 211 mtx_cumsum;
#X msg 49 167 1 16;
#X obj 49 189 mtx_ones;
#X obj 49 233 mtx_- 1;
#X obj 49 255 mtx_* 0;
#X obj 117 165 / 8;
#X obj 49 280 mtx_cos;
#X obj 117 255 * 3.14159;
#X text 109 280 cosine wave;
#X obj 100 330 mtx_rfft, f 19;
#X obj 90 141 t b f;
#N canvas 205 83 207 172 pi 0;
#X obj 38 16 loadbang;
#X msg 38 39 1 1;
#X obj 38 62 atan2;
#X obj 38 85 * 4;
#X obj 38 108 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 168 232 pd pi;
#N canvas 0 0 545 558 ~ 0;
#X obj 74 80 inlet mtx;
#X obj 343 208 array define \$0.orig~;
#N canvas 1067 375 450 300 mtx2table 0;
#X obj 54 93 list split 3;
#X obj 54 32 t a a;
#X obj 94 32 mtx_size;
#X obj 88 119 list split 16;
#X obj 88 146 t l l;
#X obj 115 170 array set \$0.orig~;
#X obj 221 76 array size \$0.orig~;
#X obj 88 197 list length;
#X obj 54 9 inlet;
#X obj 88 220 outlet;
#X obj 261 187 array size \$0.re~;
#X obj 261 207 array size \$0.im~;
#X obj 236 156 t f f;
#X obj 163 76 t f f f;
#X obj 236 132 + 1;
#X obj 236 109 >> 1;
#X connect 0 1 3 0;
#X connect 1 0 0 0;
#X connect 1 1 2 0;
#X connect 2 1 13 0;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 4 1 5 0;
#X connect 7 0 9 0;
#X connect 8 0 1 0;
#X connect 12 0 11 0;
#X connect 12 1 10 0;
#X connect 13 0 3 1;
#X connect 13 1 15 0;
#X connect 13 2 6 0;
#X connect 14 0 12 0;
#X connect 15 0 14 0;
#X restore 74 139 pd mtx2table;
#X obj 112 212 tabreceive~ \$0.orig~;
#X obj 112 235 rfft~;
#X obj 112 258 tabsend~ \$0.re~;
#X obj 222 258 tabsend~ \$0.im~;
#X obj 343 240 array define \$0.re~;
#X obj 343 260 array define \$0.im~;
#X msg 74 160 set \$1 \, bang;
#X obj 74 184 switch~;
#X obj 62 342 array get \$0.re~;
#X obj 62 292 bang~;
#X obj 62 315 t b b, f 21;
#X obj 185 341 array get \$0.im~;
#N canvas 735 461 450 300 DSP? 0;
#X obj 83 102 inlet;
#X obj 83 125 spigot;
#X obj 83 148 outlet;
#X obj 134 113 r pd;
#X obj 134 136 route dsp;
#X text 86 64 only calculate if DSP is on...;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 4 0 1 1;
#X restore 74 110 pd DSP?;
#X text 75 25 calculate the rFFT using Pd's built-in [rfft~] object;
#X text 74 50 (this patch only works if DSP is *on*);
#X obj 62 485 outlet re;
#X obj 185 486 outlet im;
#X obj 185 462 mtx;
#X obj 185 364 t l l;
#X obj 212 388 list length;
#X msg 212 411 1 \$1;
#X obj 212 434 mtx_zeros;
#X obj 62 462 mtx;
#X obj 62 364 t l l;
#X obj 89 388 list length;
#X msg 89 411 1 \$1;
#X obj 89 434 mtx_zeros;
#X connect 0 0 15 0;
#X connect 2 0 9 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 9 0 10 0;
#X connect 11 0 26 0;
#X connect 12 0 13 0;
#X connect 13 0 11 0;
#X connect 13 1 14 0;
#X connect 14 0 21 0;
#X connect 15 0 2 0;
#X connect 20 0 19 0;
#X connect 21 0 20 0;
#X connect 21 1 22 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 20 1;
#X connect 25 0 18 0;
#X connect 26 0 25 0;
#X connect 26 1 27 0;
#X connect 27 0 28 0;
#X connect 28 0 29 0;
#X connect 29 0 25 1;
#X restore 49 330 pd ~;
#X obj 49 303 t a a, f 9;
#X obj 90 8 inlet bang;
#N canvas 735 461 450 300 DSP 0;
#X obj 57 28 inlet post;
#X obj 186 26 inlet pre;
#X obj 328 70 r pd-dsp-started;
#X obj 330 130 r pd-dsp-stopped;
#X msg 328 95 1;
#X msg 330 155 0;
#X obj 218 109 i;
#X obj 57 136 i;
#X obj 57 53 t b;
#X msg 57 161 dsp \$1;
#X obj 57 186 s pd;
#X obj 186 51 t b b;
#X msg 186 76 1;
#X connect 0 0 8 0;
#X connect 1 0 11 0;
#X connect 2 0 4 0;
#X connect 3 0 5 0;
#X connect 4 0 6 1;
#X connect 5 0 6 1;
#X connect 6 0 7 1;
#X connect 7 0 9 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 11 0 12 0;
#X connect 11 1 6 0;
#X connect 12 0 9 0;
#X restore 133 100 pd DSP;
#X msg 159 8 bang;
#X msg 90 31 2.5;
#X floatatom 159 45 5 0 0 0 - - - 0;
#X obj 49 366 mtx_-;
#X obj 49 389 mtx_abs;
#X obj 49 412 mtx_< 1e-07;
#X obj 149 366 mtx_-;
#X obj 149 389 mtx_abs;
#X obj 149 412 mtx_< 1e-07;
#X obj 49 438 mtx_isequal 1;
#X obj 149 438 mtx_isequal 1;
#X obj 49 461 *;
#X obj 49 524 outlet 1==OK;
#X text 279 332 this uses Pd's DSP \, and therefore the result is one tick late!;
#X obj 90 70 t b f b b, f 24;
#X text 284 507 wait for the result;
#X obj 99 475 print mtx_rfft:03_function;
#X obj 49 493 t a a;
#X msg 231 504 -1000;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 13 0;
#X connect 7 0 4 1;
#X connect 9 0 19 1;
#X connect 9 1 22 1;
#X connect 10 0 1 0;
#X connect 10 1 5 0;
#X connect 11 0 7 1;
#X connect 12 0 19 0;
#X connect 12 1 22 0;
#X connect 13 0 12 0;
#X connect 13 1 9 0;
#X connect 14 0 17 0;
#X connect 16 0 18 0;
#X connect 17 0 30 0;
#X connect 18 0 30 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 21 0 25 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 26 0;
#X connect 25 0 27 0;
#X connect 26 0 27 1;
#X connect 27 0 33 0;
#X connect 30 0 15 0;
#X connect 30 1 10 0;
#X connect 30 2 15 1;
#X connect 30 3 34 0;
#X connect 33 0 28 0;
#X connect 33 1 32 0;
#X connect 34 0 33 0;
